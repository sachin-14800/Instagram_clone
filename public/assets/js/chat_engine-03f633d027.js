class ChatEngine{constructor(e,t,s){let i;this.chatBox=$(`#${e}`),this.userid=t,this.recieverid=s,i=t.localeCompare(s)>0?t+s:s+t,this.chatroom=i,this.socket=io.connect("http://35.154.198.18:5000",{withCredentials:!0}),this.userid&&this.connectionHandler()}connectionHandler(){let e=this;this.socket.on("connect",(function(){e.socket.emit("join_room",{userid:e.userid,recieverid:e.recieverid,chatroom:e.chatroom}),e.socket.on("user_joined",(function(e){}))})),$("#send-message").click((function(){let t=$("#chat-message-input").val();""!=t&&e.socket.emit("send_message",{message:t,userid:e.userid,recieverid:e.recieverid,chatroom:e.chatroom})})),e.socket.on("receive_message",(function(t){let s=$("<li>"),i="other-message";t.userid==e.userid&&(i="self-message"),s.append($("<span>",{html:t.message})),s.addClass(i),$("#chat-messages-list").prepend(s),$("#chat-message-input").val(""),scroll_to_bottom($("#chat-message-input"))}))}}var scroll_to_bottom=function(e){var t=0,s=new_height=e.height(),i=setInterval((function(){s!=new_height||t>=30?(clearInterval(i),e.animate({scrollTop:new_height},"slow")):(new_height=e.height(),t++)}),100)};